#include &lt;virtuabotixRTC.h&gt; #include &lt;SD.h&gt; #include &lt;SPI.h&gt; #define VREF 5.0 #define TEMPERATURE_PIN A2 #define HUMIDITY_PIN A0 #define ADC_RESOLUTION 1024 float Tc, Tf, RH, analogVolt; //Wiring SCLK -&gt; 6, I/O -&gt; 7, CE -&gt; 8
//Or CLK -&gt; 6 , DAT -&gt; 7, Reset -&gt; 8 virtuabotixRTC myRTC(6, 7, 8); //If you change the wiring change the pins here also File myFile; int pinCS = 53; // Pin 10 on Arduino Uno void setup() { myRTC.setDS1302Time(00, 25, 9, 2, 01, 6, 2021); //Here
you write your actual time/date as shown above Serial.begin(9600); Serial.print(&quot;Initializing SD card...&quot;); // For Mega boards with an Ethernet shield, make sure the Wiznet // chip is not selected: pinMode(pinCS, OUTPUT); pinMode(TEMPERATURE_PIN,
INPUT); pinMode(HUMIDITY_PIN, INPUT); if (SD.begin(pinCS)) { Serial.println(&quot;Card ok&quot;); } else { Serial.println(&quot;Failed.&quot;); } } void loop() { analogVolt = (float)analogRead(TEMPERATURE_PIN) / ADC_RESOLUTION * VREF; // Convert voltage
to temperature (℃, centigrade) Tc = -66.875 + 72.917 * analogVolt; // Convert voltage to temperature (°F, fahrenheit ) Tf = -88.375 + 131.25 * analogVolt; Serial.print(&quot;Termperature:&quot; ); Serial.print(Tc, 1); Serial.print(&quot; C / &quot; );
Serial.print(Tf, 1); Serial.println(&quot; F&quot; ); analogVolt = (float)analogRead(HUMIDITY_PIN) / ADC_RESOLUTION * VREF; // Convert voltage to relative humidity (%) RH = -12.5 + 41.667 * analogVolt; Serial.print(&quot;Humidity:&quot; ); Serial.print(RH,
1); Serial.println(&quot; %RH&quot; ); Serial.println(); // This allows for the update of variables for time or accessing the individual elements. myRTC.updateTime(); myFile = SD.open(&quot;test.txt&quot;, FILE_WRITE); if(myFile){ // Start printing elements
as individuals Serial.print(&quot;Current Date / Time: &quot;); Serial.print(myRTC.dayofmonth); myFile.print(myRTC.dayofmonth); Serial.print(&quot;/&quot;); myFile.print(&quot;/&quot;); Serial.print(myRTC.month); myFile.print(myRTC.month); Serial.print(&quot;/&quot;);
myFile.print(&quot;/&quot;); Serial.print(myRTC.year); myFile.print(myRTC.year); Serial.print(&quot; &quot;); myFile.print(&quot; &quot;); Serial.print(myRTC.hours); myFile.print(myRTC.hours); Serial.print(&quot;:&quot;); myFile.print(&quot;:&quot;);
Serial.print(myRTC.minutes); myFile.print(myRTC.minutes); Serial.print(&quot;:&quot;); myFile.print(&quot;:&quot;); Serial.print(myRTC.seconds); myFile.print(myRTC.seconds); Serial.print(&quot; &quot;); myFile.print(&quot; &quot;); Serial.print(Tc); myFile.print(Tc);
Serial.print(&quot; &quot;); myFile.print(&quot; &quot;); Serial.print(RH); myFile.print(RH); Serial.print(&quot;\n&quot;); myFile.print(&quot;\n&quot;); myFile.close(); delay(10000); // Delay so the program doesn&#39;t print non-stop } } //END END